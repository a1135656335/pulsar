#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

### --- Web Socket proxy settings --- ###

# Configuration Store connection string
configurationStoreServers = memory://127.0.0.1:2181

# Zookeeper session timeout in milliseconds
zooKeeperSessionTimeoutMillis = 30000
# ZooKeeper cache expiry time in seconds
zooKeeperCacheExpirySeconds = 300

# Pulsar cluster url to connect to broker (optional if configurationStoreServers present)
serviceUrl = pulsar://192.168.30.130:6650
serviceUrlTls =
  brokerServiceUrl=
brokerServiceUrlTls =

# Port to use to server HTTP request
  webServicePort=8080
# Port to use to server HTTPS request
webServicePortTls =

# Path for the file used to determine the rotation status for the proxy-instance when responding
# to service discovery health checks
  statusFilePath=

# Hostname or IP address the service binds on, default is 0.0.0.0.
bindAddress = 0.0.0.0

# Name of the pulsar cluster to connect to
clusterName = standalone

# Number of IO threads in Pulsar Client used in WebSocket proxy
webSocketNumIoThreads = 8

# Number of threads to use in HTTP server. Default is Runtime.getRuntime().availableProcessors()
numHttpServerThreads =

# Number of connections per Broker in Pulsar Client used in WebSocket proxy
  webSocketConnectionsPerBroker=8

# Time in milliseconds that idle WebSocket session times out
webSocketSessionIdleTimeoutMillis = 300000

# The maximum size of a text message during parsing in WebSocket proxy
webSocketMaxTextFrameSize = 1048576

### --- Authentication --- ###

# Enable authentication
authenticationEnabled = true

# Authentication provider name list, which is comma separated list of class names
authenticationProviders = org.apache.pulsar.broker.authentication.AuthenticationProviderXzzh

# Enforce authorization
authorizationEnabled = true

# Authorization provider fully qualified class-name
authorizationProvider = org.apache.pulsar.broker.authentication.PulsarAuthorizationProviderXzzh

pulsar.xzzh.authentication.grpc.url = gateway-deploy-primary.smartcloud-service-istio.svc.cluster.local:10701

# Allow wildcard matching in authorization
# (wildcard matching only applicable if wildcard-char:
# * presents at first or last position eg: *.pulsar.service, pulsar.service.*)
authorizationAllowWildcardsMatching = false

# Role names that are treated as "super-user", meaning they will be able to do all admin
# operations and publish/consume from all topics
superUserRoles = broker_admin, function_admin, app_admin, proxy_admin

tokenPublicKey = ./my-public.key

# Authentication settings of the proxy itself. Used to connect to brokers
brokerClientTlsEnabled = false
brokerClientAuthenticationPlugin = org.apache.pulsar.client.impl.auth.AuthenticationXzzh
brokerClientAuthenticationParameters = token:eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiItMiIsImF1ZCI6InB1bHNhciIsImF1ZElkIjoiMCIsInJvbGVzIjoiYnJva2VyX2FkbWluLGZ1bmN0aW9uX2FkbWluLHByb3h5X2FkbWluLGFwcF9hZG1pbiIsImlzcyI6Inh6emguY29tIiwic3ViVHlwZSI6IjUiLCJleHAiOiIyMDMxLTA4LTE5IDIwOjIxOjEzIiwiaWF0IjoiMjAyMS0wOC0yNSAyMDo0NzozOSIsImp0aSI6IjI3MjgxNDQ0MDQ4MCJ9.a5NA_iDM4iBh02KaVzWVHRjzzMsBVIQVybvhykAUXZnu3EfT7lyHWAGRtUXH7EQHxE07QtGSrkwUecUDbMAc6rmhN_W0qG7neMuA0ZH7Wl3i6sx-Lz6IoyHxTwTu_J2DuF-GSqPVhoyjktHCGnlrAe6khvZHZO8MzTRU17gpsHXUHL0f8YcB54TLO3QKYtDjZDniAnikp3t9Q_XgSd584zWS3sU4SZfdJAL0T8rtyFvk2n3oc6XmtmDQ1ev7qh6XwbJMxAg3ckk5dQJg2SPlDyeqmqEgZLjUPIWMLd2stll7WPHPwAN_XGiG7AbycMtsJxxWFL_iT5MIoYC1lSzUUk6RxfSj6Zm-hfno043XzDZSkw5m5MV_oH8l9rSHQ5s_x4vdqBROEQSy65zZEJFuWYzK0B8Ur5tD12f8lAXBU8fk7GK3NInCU23O9YSCHLr9-86DPLSHc9bNtesw-F93BjnKwWEtZr-TxmiDWcoM-JPZF97yfpsim-Urp_Fe3lTNwBowOUmUmMNMrXaCcXZrRxurFOUau8nxXxpZcHzrQ6lEly4L4myEqJDocu8mX30h890NjumSkEHZSN2Ng5a7lc9p-OsO2Gi5V4nEv7bM2XLg8p7icXQyMDZjJ94S9joSzkyNlPg4-DzYxlEY_MWf2L-GuylNUpUrP49NPulOeGc
brokerClientTrustCertsFilePath =

# When this parameter is not empty, unauthenticated users perform as anonymousUserRole
  anonymousUserRole =

### --- TLS --- ###

# Deprecated - use webServicePortTls and brokerClientTlsEnabled instead
tlsEnabled = false

# Accept untrusted TLS certificate from client
tlsAllowInsecureConnection = false

# Path for the TLS certificate file
tlsCertificateFilePath =

# Path for the TLS private key file
  tlsKeyFilePath=

# Path for the trusted TLS certificate file
tlsTrustCertsFilePath =

# Specify whether Client certificates are required for TLS
# Reject the Connection if the Client Certificate is not trusted.
  tlsRequireTrustedClientCertOnConnect=false

# Tls cert refresh duration in seconds (set 0 to check on every new connection) 
tlsCertRefreshCheckDurationSec = 300

### --- Deprecated config variables --- ###

# Deprecated. Use configurationStoreServers
globalZookeeperServers =
